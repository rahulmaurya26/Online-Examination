<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Results</title>
</head>
<body>

    <h1>Quiz Results</h1>
    <div id="resultsContainer"></div>

    <script>
        function showResults() {
            fetch("view_result.php")
                .then(response => response.json())
                .then(data => {
                    if (!data.success) {
                        alert(data.message);
                        window.location.href = "login.html";
                        return;
                    }
                    
                    let resultsContainer = document.getElementById("resultsContainer");
                    resultsContainer.innerHTML = `<h2>Results for ${data.results[0].student_name}</h2>`;

                    data.results.forEach((result, index) => {
                        resultsContainer.innerHTML += `
                            <div class="result-box">
                                <h3>Test ${index + 1}</h3>
                                <table border="1">
                                    <tr><td>Subject Name</td><td>${result.subject_name}</td></tr>
                                    <tr><td>Total Questions</td><td>${result.total_questions}</td></tr>
                                    <tr><td>Attempt</td><td>${result.attempted}</td></tr>
                                    <tr><td>Correct</td><td>${result.correct}</td></tr>
                                    <tr><td>Wrong</td><td>${result.wrong}</td></tr>
                                    <tr><td>Percentage</td><td>${result.percentage}%</td></tr>
                                    <tr><td>Your Total Score</td><td>${result.total_score}</td></tr>
                                    <tr><td>Quiz Date</td><td>${result.quiz_date}</td></tr>
                                    <tr><td>Quiz Time</td><td>${result.quiz_time}</td></tr>
                                </table>
                            </div>
                            <br>
                        `;
                    });
                })
                .catch(error => console.error("Error:", error));
        }

        window.onload = showResults;
    </script>

</body>
</html>
